{% extends "base.html" %}
{% load i18n %}

{% load crispy_forms_tags %}
{% block content %}
  <form method="get">
    {{ filter.form|crispy }} <input type="hidden"/>
    <button class="btn btn-outline-primary btn-block" type="submit">{% trans "Filter" %}</button>
  </form>

  <h1 class="title">{% trans "Derzeitiger Stand" %}</h1>

  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/maps/modules/map.js"></script>
  <div id="container" style="width:100%; height:400px;"></div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
      const chart = new Highcharts.chart('container', {
  chart: {
    type: 'bar'
  },
  title: {
    text: 'Veteilung Erneuerbarer Energien'
  },
  xAxis: {
    categories: ['Deutschland'],
    title: {
      text: null
    }
  },
  yAxis: {
    min: 0,
    title: {
      text: 'Nettonennleistung (kWh)',
      align: 'middle'
    },
    labels: {
      overflow: 'justify'
    }
  },
  tooltip: {
    valueSuffix: ' kWh'
  },
  plotOptions: {
    bar: {
      dataLabels: {
        enabled: true
      }
    }
  },
  legend: {
    layout: 'vertical',
    align: 'right',
    verticalAlign: 'top',
    x: -40,
    y: 80,
    floating: true,
    borderWidth: 1,
    backgroundColor:
      Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF',
    shadow: true
  },
  credits: {
    enabled: false
  },
  series: [{
    name: 'Wasser',
    data: [{{ filter.sum.water_sum|floatformat:0 }}]
  }, {
    name: 'Wind',
    data: [{{ filter.sum.wind_sum|floatformat:0 }}]
  }, {
    name: 'Sonne',
    data: [{{ filter.sum.solar_sum|floatformat:0 }}]
  }, {
    name: 'Biomasse',
    data: [{{ filter.sum.biomass_sum|floatformat:0 }}]
  }]
});})
</script>


{% endblock content %}
