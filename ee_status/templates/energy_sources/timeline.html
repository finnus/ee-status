{% extends "base.html" %}
{% load i18n %}

{% load crispy_forms_tags %}
{% block content %}
  <form method="get">
    {{ filter.form|crispy }} <input type="hidden"/>
    <button class="btn btn-outline-primary btn-block" type="submit">{% trans "Filter" %}</button>
  </form>

  <h1 class="title">{% trans "Entwicklung Erneuerbare Energien" %}</h1>

  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/maps/modules/map.js"></script>
  <div id="container1" style="width:100%; height:400px;"></div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const chart = new Highcharts.chart('container1', {
        title: {
              text: 'Entwicklung'
              },
        chart: {
                zoomType: 'x'
            },
      yAxis: {
          title: {
            text: 'Nettonennleistung'
          }
        },
        xAxis: {
          type: 'datetime'
        },
        series: [{
          name: '',
          data: [
            {% for mt in monthly_timeline %}
            [Date.UTC({{ mt.date|date:"Y, n, j"}}), {{ mt.net_sum}}],
          {% endfor %}
          ]
        }]

      });
    });

  </script>

  {% for mt in monthly_timeline %}
            [Date.UTC({{ mt.date|date:"Y, n, j"}}), {{ mt.net_sum}}, {{ mt.energy_source }}],
            <br>
          {% endfor %}


{% endblock content %}
