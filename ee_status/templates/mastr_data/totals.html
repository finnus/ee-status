{% extends "base.html" %}
{% load i18n %}
{% load humanize %}
{% load l10n %}

{% load crispy_forms_tags %}
{% block content %}
  <div class="container mt-5">

  <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
    <ol class="breadcrumb">
      {% for realm in total_net_nominal_capacity_per_capita reversed %}
        {% if not forloop.last %}
          <li class="breadcrumb-item active" aria-current="page">
            <a
              href="{% url 'mastr_data:totals' %}?{{ realm.realm_type }}={{ realm.realm_name }}">{{ realm.realm_name }}</a>
          </li>
        {% else %}
          <li class="breadcrumb-item active" aria-current="page">
            {{ realm.realm_name }}
          </li>
        {% endif %}
      {% endfor %}
    </ol>
  </nav>

  <div class="row mt-1">


    <h1 class="title">{{ basics.realm_name }}</h1>

    {{ div_timeline|safe }}
    {{ script| safe }}
  </div>

  <div class="row mt-3">
    <div class="col text-center">
      <h3>{{ basics.total_population|intcomma }}</h3>
      Einwohner:innen
    </div>
    <div class="col text-center">
      <h3>{{ basics.total_area|floatformat:0|intcomma }}</h3>
      km² Fläche
    </div>
    <div class="col text-center">
      <h3>{{ basics.total_production_capacity|floatformat:0|intcomma }}</h3>
      kW installierte Erzeugungsleistung
    </div>
    <div class="col text-center">
      <h3>{{ basics.total_storage_capacity|floatformat:0|intcomma }}</h3>
      kW Speicherkapazität
    </div>
    <div class="col text-center">
      <h3>{{ basics.count_of_devices|intcomma }}</h3>
      <a href="{% url 'mastr_data:energy_units' %}?{{ basics.realm_type }}={{ basics.realm_name }}">erneuerbare
        Energieanlagen</a>
    </div>
  </div>



  <div class="row mt-5">
  <div class="col">
    <h3 class="title">{% trans "Production capacity per capita" %}</h3>
    <table class="table">
      <tbody>
      {% for realm in total_net_nominal_capacity_per_capita %}
        {% if forloop.first %}
          <th>{{ realm.realm_name }}</th>
          <th></th>
          <th>(⌀ {{ realm.score }} kW / Person)</th>
          <th></th>
        {% endif %}

        <tr>
          {% if not forloop.first %}
            <td>
              <svg width="1.2em" height="1.2em">
                <use href="#bi-arrow-return-right"/>
              </svg>
              <a
                href="{% url 'mastr_data:rankings' %}?scope={{ basics.realm_type }}&{{ realm.realm_type }}={{ realm.realm_name }}&numerator={{ realm.numerator }}&denominator={{ realm.denominator }}">
                in {{ realm.realm_name }}
              </a>
            </td>
            <td class="text-end">{{ realm.rank }}. {% trans "Rank" %}</td>
            <td>

              <input type="range" class="ranking" min="0" max="{{ realm.total_ranks }}" step="1"
                     value="{{ realm.rank }}"
                     id="customRange{{ forloop.counter }}" disabled>
            </td>
            <td>
              {% trans "of " %} {{ realm.total_ranks }}
            </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="col">
    <h3 class="title">{% trans "Production capacity per km²" %}</h3>
    <table class="table">
      <tbody>
      {% for realm in total_net_nominal_capacity_per_area %}
        {% if forloop.first %}
          <th>{{ realm.realm_name }}</th>
          <th></th>
          <th>(⌀ {{ realm.score }} kW / Person)</th>
          <th></th>
        {% endif %}

        <tr>
          {% if not forloop.first %}
            <td>
              <svg width="1.2em" height="1.2em">
                <use href="#bi-arrow-return-right"/>
              </svg>
              <a
                href="{% url 'mastr_data:rankings' %}?scope={{ basics.realm_type }}&{{ realm.realm_type }}={{ realm.realm_name }}&numerator={{ realm.numerator }}&denominator={{ realm.denominator }}">
                in {{ realm.realm_name }}
              </a>
            </td>
            <td class="text-end">{{ realm.rank }}. {% trans "Rank" %}</td>
            <td>

              <input type="range" class="ranking" min="0" max="{{ realm.total_ranks }}" step="1"
                     value="{{ realm.rank }}"
                     id="customRange{{ forloop.counter }}" disabled>
            </td>
            <td>
              {% trans "of " %} {{ realm.total_ranks }}
            </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="row mt-5">
    <div class="col">
      <h3 class="title">{% trans "Storage capacity per capita" %}</h3>
      <table class="table">
        <tbody>
        {% for realm in storage_capacity_per_capita %}
          {% if forloop.first %}
            <th>{{ realm.realm_name }}</th>
            <th></th>
            <th>(⌀ {{ realm.score }} kW / Person)</th>
            <th></th>
          {% endif %}

          <tr>
            {% if not forloop.first %}
              <td>
                <svg width="1.2em" height="1.2em">
                  <use href="#bi-arrow-return-right"/>
                </svg>
                <a
                  href="{% url 'mastr_data:rankings' %}?scope={{ basics.realm_type }}&{{ realm.realm_type }}={{ realm.realm_name }}&numerator={{ realm.numerator }}&denominator={{ realm.denominator }}">
                  in {{ realm.realm_name }}
                </a>
              </td>
              <td class="text-end">{{ realm.rank }}. {% trans "Rank" %}</td>
              <td>

                <input type="range" class="ranking" min="0" max="{{ realm.total_ranks }}" step="1"
                       value="{{ realm.rank }}"
                       id="customRange{{ forloop.counter }}" disabled>
              </td>
              <td>
                {% trans "of " %} {{ realm.total_ranks }}
              </td>
            {% endif %}
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="col">
      <h3 class="title">{% trans "Storage capacity per km²" %}</h3>
      <table class="table">
        <tbody>
        {% for realm in storage_capacity_per_area %}
          {% if forloop.first %}
            <th>{{ realm.realm_name }}</th>
            <th></th>
            <th>(⌀ {{ realm.score }} kW / Person)</th>
            <th></th>
          {% endif %}

          <tr>
            {% if not forloop.first %}
              <td>
                <svg width="1.2em" height="1.2em">
                  <use href="#bi-arrow-return-right"/>
                </svg>
                <a
                  href="{% url 'mastr_data:rankings' %}?scope={{ basics.realm_type }}&{{ realm.realm_type }}={{ realm.realm_name }}&numerator={{ realm.numerator }}&denominator={{ realm.denominator }}">
                  in {{ realm.realm_name }}
                </a>
              </td>
              <td class="text-end">{{ realm.rank }}. {% trans "Rank" %}</td>
              <td>

                <input type="range" class="ranking" min="0" max="{{ realm.total_ranks }}" step="1"
                       value="{{ realm.rank }}"
                       id="customRange{{ forloop.counter }}" disabled>
              </td>
              <td>
                {% trans "of " %} {{ realm.total_ranks }}
              </td>
            {% endif %}
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="col">

  </div>



  <link href=”http://cdn.pydata.org/bokeh/release/bokeh-2.4.2.min.css" rel=”stylesheet” type=”text/css”>
  <link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-2.4.2.min.css" rel=”stylesheet” type=”text/css”>

  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.4.2.min.js"></script>

{% endblock content %}
