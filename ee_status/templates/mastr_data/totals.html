{% extends "base.html" %}
{% load i18n %}
{% load humanize %}

{% load crispy_forms_tags %}
{% block content %}
  <div class="container mt-5">

  <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
    <ol class="breadcrumb">
      {% for realm_type, realm_name, score, rankings in total_net_nominal_capacity_per_capita reversed %}
        {% if not forloop.last %}
          <li class="breadcrumb-item active" aria-current="page">
            <a href="{% url 'mastr_data:totals' %}?{{ realm_type }}={{ realm_name }}">{{ realm_name }}</a>
          </li>
        {% else %}
          <li class="breadcrumb-item active" aria-current="page">
            {{ realm_name }}
          </li>
        {% endif %}
      {% endfor %}
    </ol>
  </nav>

  <div class="row mt-1">

    {% for realm_type, realm_name, score, rankings in total_net_nominal_capacity_per_capita %}
      {% if forloop.first %}<h1 class="title">{{ realm_name }}</h1>{% endif %}
    {% endfor %}
    {{ div_timeline|safe }}
    {{ script| safe }}
  </div>

  <div class="row mt-3">
    <div class="col text-center">
      <h3>{{ basics.total_population|intcomma }}</h3>
      Einwohner:innen
    </div>
    <div class="col text-center">
      <h3>{{ basics.total_area|floatformat:0|intcomma }}</h3>
      km² Fläche
    </div>
    <div class="col text-center">
      <h3>{{ basics.total_production_capacity|floatformat:0|intcomma}}</h3>
      kW installierte Erzeugungsleistung
    </div>
    <div class="col text-center">
      <h3>{{ basics.total_storage_capacity|floatformat:0|intcomma }}</h3>
      kW Speicherkapazität
    </div>
  </div>



  <div class="row mt-5">
  <div class="col">
    <h2 class="title">{% trans "Production capacity per capita" %}</h2>
    <table class="table">
      <tbody>
      {% for realm_type, realm_name, score, rankings in total_net_nominal_capacity_per_capita %}
        {% if forloop.first %}
          <th>{{ realm_name }} (⌀ {{ score|floatformat:2 }} kW / Person)</th>
        {% endif %}

        <tr>
          {% if not forloop.first %}
            {% for rank, total_ranks in rankings %}
              <td>
              <svg width="1.2em" height="1.2em">
                <use href="#bi-arrow-return-right"/>
              </svg>
              {{ rank }}. {% trans "Rank (of" %} {{ total_ranks }}) {% endfor %}in {{ realm_name }}
          </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="col">
    <h2 class="title">{% trans "Production capacity per km²" %}</h2>
    <table class="table">
      <tbody>
      {% for realm_type, realm_name, score, rankings in total_net_nominal_capacity_per_sm %}
        {% if forloop.first %}
          <th>{{ realm_name }} (⌀ {{ score|floatformat:2 }} kW / km²)</th>
        {% endif %}

        <tr>
          {% if not forloop.first %}
            {% for rank, total_ranks in rankings %}
              <td>
              <svg width="1.2em" height="1.2em">
                <use href="#bi-arrow-return-right"/>
              </svg>
              {{ rank }}. {% trans "Rank (of" %} {{ total_ranks }}) {% endfor %}in {{ realm_name }}
          </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="row mt-5">
  <div class="col">
    <h2 class="title">{% trans "Storage capacity per capita" %}</h2>
    <table class="table">
      <tbody>
      {% for realm_type, realm_name, score, rankings in storage_capacity_per_capita %}
        {% if forloop.first %}
          <th>{{ realm_name }} (⌀ {{ score|floatformat:2 }} kW / Person)</th>
        {% endif %}

        <tr>
          {% if not forloop.first %}
            {% for rank, total_ranks in rankings %}
              <td>
              <svg width="1.2em" height="1.2em">
                <use href="#bi-arrow-return-right"/>
              </svg>
              {{ rank }}. {% trans "Rank (of" %} {{ total_ranks }}) {% endfor %}in {{ realm_name }}
          </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="col">

  </div>



  <link href=”http://cdn.pydata.org/bokeh/release/bokeh-2.4.2.min.css" rel=”stylesheet” type=”text/css”>
  <link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-2.4.2.min.css" rel=”stylesheet” type=”text/css”>

  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.4.2.min.js"></script>

{% endblock content %}
